{% extends "base.html" %}
{% load static %}
{% block title %}êµí™˜ë…ì„œ | ê·¸ë£¹ ë§Œë“¤ê¸°{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" type="text/css" href="/static/css/Share_AddGroup.css">
  <link rel="stylesheet" type="text/css" href="/static/css/paginator.css">
{% endblock %}

  {% block content %}
    <!-- êµí™˜ë…ì„œ ê·¸ë£¹ë§Œë“¤ê¸°  -->
    <div class="feed__content">
      <!-- ì°¸ì—¬ì¤‘ì´ ê·¸ë£¹ í‘œì‹œ -->
      <div class="feed__add">
          <div class="feed__add_title">
              <i class="fa-solid fa-user-group"></i>
              <span>êµí™˜ë…ì„œ ê·¸ë£¹ ë§Œë“¤ê¸°</span>
          </div>
          <!-- form (addgroupFrm)-->
          <form action="{% url 'shareMain:Share_AddGroup' %}" method="post" name="addgroupFrm" id="addgroupFrm">
            {% csrf_token %}
            <!-- ğŸ“Œ ìˆ¨ê²¨ì§„ inputë“¤ë¡œ ì±… ì •ë³´ ì „ë‹¬ -->
            <input type="hidden" id="id_book_title" name="book_title">
            <input type="hidden" id="id_book_author" name="book_author">
            <input type="hidden" id="id_book_cover" name="book_cover">
            <input type="hidden" id="id_book_isbn" name="book_isbn">
            <input type="hidden" id="id_tag" name="tag">
              <table class="group_table">
                <tbody>
                  <!-- ê·¸ë£¹ëª… -->
                  <tr>
                    <th>
                      <label>ê·¸ë£¹ëª…</label>
                      <span>*</span>
                    </th>
                    <td><input type="text" name="group_name" class="group_name" placeholder="ê·¸ë£¹ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required></td>
                  </tr>
                  <!-- ê·¸ë£¹ ì¸ì› -->
                  <tr>
                    <th>
                      <label>ê·¸ë£¹ ì¸ì›</label>
                      <span>*</span>
                    </th>
                    <td>
                      <div class="member">
                        <select id="max_member" name="max_member" required >
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5</option>
                          <option>6</option>
                          <option>7</option>
                          <option>8</option>
                          <option>9</option>
                          <option selected>10</option>
                        </select>
                        <span class="group_otherText">*ìµœì†Œ 2ëª… ~ ìµœëŒ€ 10ëª…</span>
                      </div>
                    </td>
                  </tr>
                  <!-- ê·¸ë£¹ ì†Œê°œ -->
                  <tr>
                    <th>
                      <label>ê·¸ë£¹ ì†Œê°œ</label>
                      <span>*</span>
                    </th>
                    <td>
                      <textarea name="description" class="group_description" rows="4" placeholder="ê·¸ë£¹ ì†Œê°œê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required></textarea>
                    </td>
                  </tr>
                  <!-- ì±… ì„ íƒ -->
                  <script>
                    const AJAX_SEARCH_URL = "{% url 'shareMain:ajax_search' %}";
                  </script>
                  <tr>
                    <th>
                      <label>ì±… ì„ íƒ</label>
                      <span>*</span>
                    </th>
                    <td>
                      <!-- ì—¬ê¸°ì— ì„ íƒëœ ì±… í‘œì‹œ -->
                      <div id="selected-book-display">
                        <div id="book_search_trigger" class="selected_book_img">
                          <img src='/static/images/plusBtn.png'/>
                        </div>
                      </div>
                      <!-- ì„ íƒëœ ì±… í‘œì‹œ ë -->
                    </td>
                  </tr>
                  <!-- ì±… ê²€ìƒ‰ - ëª¨ë‹¬ ì „ì²´ -->
                  <div class="book_modal" id="book_search_modal">
                    <div class="modal_overlay"></div>
                    <div class="modal_content">
                      <button type="button" class="modal_close">
                        <i class="fa-solid fa-xmark"></i>
                      </button>
                      <h2>ì±… ì„ íƒ</h2>
                      <!-- ëª¨ë‹¬ ë‚´ë¶€ ê²€ìƒ‰ input -->
                      <div class="modal_input_wrap">
                        <input type="text" name="book" class="modal_search" id="book_search_input_modal" placeholder="ì±… ì œëª©/ì €ì ê²€ìƒ‰">
                        <button type="button" class="modal_search_btn" id="modal_search_btn">
                          <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                      </div>
                      <!-- ê²€ìƒ‰ ê²°ê³¼ -->
                      <div class="modal_results">
                        <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ê²€ìƒ‰ ê²°ê³¼ ì‚½ì… -->
                      
                        <!-- ëª¨ë‹¬ì°½ paginator -->
                        <div class="pg-container">
                            <div class="paginator">
                                <!-- ì²« í˜ì´ì§€, ì´ì „ í˜ì´ì§€ ë²„íŠ¼ -->
                                <div class="pg-btns">
                                    <button disabled>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M21.9323 22.5362C22.6042 21.8162 22.6042 20.7122 21.8842 20.0162L13.5562 12.0002L23.1562 2.76019L21.4762 1.00819L10.0282 12.0002L21.4763 22.9922L21.9323 22.5122L21.9323 22.5362Z" fill="currentColor"/>
                                        <path d="M12.4786 22.5362C13.1506 21.8162 13.1506 20.7122 12.4306 20.0162L4.10256 12.0002L13.7266 2.76019L12.0466 1.00819L0.598563 12.0002L12.0226 22.9922L12.4786 22.5122L12.4786 22.5362Z" fill="currentColor"/>
                                    </svg>
                                    </button>
                                    <button disabled>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M16.3325 1.47C17.0125 2.18 16.9925 3.3 16.2825 3.98L7.9425 12L17.5625 21.25L15.8825 23L4.4425 12L15.8825 1L16.3325 1.47Z" fill="currentColor"/>
                                    </svg>
                                    </button>
                                </div>

                                <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
                                <div class="pg-numbers">
                                    <a class="active">1</a>
                                    <a>2</a>
                                    <a>3</a>
                                    <a>4</a>
                                    <a>5</a>
                                    <a>6</a>
                                </div>

                                <!-- ë‹¤ìŒ í˜ì´ì§€, ë§ˆì§€ë§‰ í˜ì´ì§€ ë²„íŠ¼ -->
                                <div class="pg-btns">
                                    <button disabled>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M7.6675 1.47C6.9875 2.18 7.0075 3.3 7.7175 3.98L16.0575 12L6.4375 21.25L8.1175 23L19.5575 12L8.1175 1L7.6675 1.47Z" fill="currentColor"/>
                                        </svg>
                                    </button>
                                    <button disabled>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M2.06775 1.46381C1.39575 2.18381 1.39575 3.28781 2.11575 3.98381L10.4437 11.9998L0.84375 21.2398L2.52375 22.9918L13.9718 11.9998L2.52375 1.00781L2.06775 1.48781V1.46381Z" fill="currentColor"/>
                                            <path d="M11.5214 1.46381C10.8494 2.18381 10.8494 3.28781 11.5694 3.98381L19.8974 11.9998L10.2734 21.2398L11.9534 22.9918L23.4014 11.9998L11.9774 1.00781L11.5214 1.48781V1.46381Z" fill="currentColor"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- ëª¨ë‹¬ì°½ paginator ë -->
                        
                      </div>
                    </div>
                  </div>
                  <!-- ê´€ë ¨ í•´ì‹œíƒœê·¸ -->
                  <tr>
                    <th><label>ê´€ë ¨ í•´ì‹œíƒœê·¸</label></th>
                    <td>
                        <div class="group_keyword">
                            <div class="group_keyword_input">
                                <input type="text" name="tag" placeholder="ì§ì ‘ ì…ë ¥ (ex. ì‹œ) ">
                                <div class="add_tag_btn">
                                    <i class="fa-solid fa-plus"></i>
                                </div>
                            </div>
                            <div class="group_keyword_output">
                                <!-- ìƒì„±ëœ íƒœê·¸ê°€ ì—¬ê¸°ì— ë“¤ì–´ê° -->
                            </div>
                            <!-- í¼ ì œì¶œìš© hidden input -->
                            <input type="hidden" name="tag" id="group_keywords_hidden">
                            <div class="tags">
                                <a href=#>#ì‹œ</a>
                                <a href=#>#ì†Œì„¤</a>
                                <a href=#>#ì—ì„¸ì´</a>
                                <a href=#>#ì¸ë¬¸</a>
                                <a href=#>#ê²½ì œ</a>
                                <a href=#>#ìê¸°ê³„ë°œ</a>
                                <a href=#>#ê³¼í•™</a>
                                <a href=#>#ì²­ì†Œë…„</a>
                                <a href=#>#ì—­ì‚¬</a>
                                <a href=#>#ì² í•™</a>
                                <a href=#>#ì‹¬ë¦¬</a>
                                <a href=#>#ìƒë‹´</a>
                                <a href=#>#í¸í•˜ê²Œì´ì•¼ê¸°</a>
                                <a href=#>#ìš°ë¦¬ë¼ë¦¬</a>
                                <a href=#>#ë…ì„œì´ˆë³´í™˜ì˜</a>
                                <a href=#>#ë¯¸ì…˜</a>
                                <a href=#>#ê¸€ì“°ê¸°</a>
                                <a href=#>#ì„¸ê³„ë¬¸í•™</a>
                                <a href=#>#ìŠ¤í† ë¦¬í…”ë§</a>
                                <a href=#>#ì—¬í–‰</a>
                                <a href=#>#ì¡ì§€</a>                                          
                                <a href=#>#ë² ìŠ¤íŠ¸ì…€ëŸ¬</a>
                                <a href=#>#ê³ ì „</a>
                                <a href=#>#ì‹ ê°„</a>
                            </div>
                        </div>
                    </td>
                  </tr>
                  <!-- ê³µê°œ ì—¬ë¶€ -->
                  <tr>
                    <th>
                        <label>ê³µê°œ ì—¬ë¶€</label>
                        <span>*</span>
                    </th>
                    <td>
                        <select id="is_public" name="is_public" required>
                            <option value="0">ê³µê°œ</option>
                            <option value="1">ë¹„ê³µê°œ</option>
                        </select>
                    </td>
                  </tr>
                  <!-- ê·¸ë£¹ ë¹„ë°€ë²ˆí˜¸ -->
                  <tr class="pw_hide">
                    <th>
                        <label>ê·¸ë£¹ ë¹„ë°€ë²ˆí˜¸</label>
                        <span>*</span>
                    </th>
                    <td>
                      <div class="input-with-icon">
                        <input type="password" name="password" class="group_pw" placeholder="ë¹„ë°€ë²ˆí˜¸"
                          id="group_pw" inputmode="numeric" pattern="\d*" maxlength="10">
                        <i class="fa-solid fa-eye-slash toggle-visibility" id="togglePw"></i>
                      </div>
                      <span id="pw_message" class="pw-message"></span>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- í•˜ë‹¨ ë²„íŠ¼ -->
              <div class="group_button">
                  <button type="button" id="group_button_1">ì·¨ì†Œ</button>
                  <button type="submit" id="group_button_2">ì™„ë£Œ</button>
              </div>
          </form>
      </div>
    
    </div>          

    {% endblock content %}

  {% block extra_js %}
<<<<<<< Updated upstream
    <script src="{% static 'js/Share_AddGroup.js' %}"></script>
=======

<!-- ì±… ê²€ìƒ‰ (ëª¨ë‹¬ì°½) -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const triggerSelector = "book_search_trigger"; // ë™ì  ìš”ì†Œë¥¼ ìœ„í•´ id ì§ì ‘ í• ë‹¹
    const modal = document.getElementById("book_search_modal");
    const overlay = modal.querySelector(".modal_overlay");
    const closeBtn = modal.querySelector(".modal_close");
    const input = document.getElementById("book_search_input_modal");
    const searchBtn = document.getElementById("modal_search_btn");
    const results = document.getElementById("modal_book_result");
    // ë”ë¯¸ ë°ì´í„°
    const dummyBooks = [
      {
        title: "ì–´ë¦° ì™•ì",
        author: "ì•™íˆ¬ì•ˆ ë“œ ìƒí…ì¥í˜ë¦¬ ì§€ìŒ, ê¹€ì„¤ì•„ ì˜®ê¹€",
        publisher: "ë‹¨í•œê¶Œì˜ì±…",
        description: "ì–´ë¦°ì´ë¥¼ ìœ„í•œ ì² í•™ë™í™”. ìˆœìˆ˜í•¨ì„ ì°¾ëŠ” ì—¬ì •.",
        image: "https://image.aladin.co.kr/product/22323/62/cover200/8932907503_1.jpg"
      },
      {
        title: "ëª¨ëª¨ì˜ ì—¬ë¦„ ë°©í•™",
        author: "ì•¼ì—˜ ì•„ìƒ¤ ì§€ìŒ, ë°•ì¬ì—° ì˜®ê¹€",
        publisher: "ë¶ˆê´‘ì¶œíŒì‚¬",
        description: "ëª¨ëª¨ëŠ” ì§€ë£¨í•¨ê³¼ ì‹¬ì‹¬í•¨ì—ì„œ ë²—ì–´ë‚˜ê³  ì‹¶ì–´ì¡Œë‹¤.",
        image: "https://image.aladin.co.kr/product/32000/60/cover200/8901265032_1.jpg"
      }
    ];
    // ëª¨ë‹¬ ì—´ê¸°
    function openModal() {
      modal.style.display = "block";
      input.focus();
    }
    // ëª¨ë‹¬ ë‹«ê¸°
    function closeModal() {
      modal.style.display = "none";
      results.innerHTML = "";
      input.value = "";
    }
    // ê²€ìƒ‰ ê²°ê³¼ ë Œë”ë§
    function renderBooks(filter = "") {
      results.innerHTML = "";
      const filtered = dummyBooks.filter(book =>
        book.title.includes(filter)
      );
      if (filtered.length === 0) {
        results.innerHTML = "<p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        return;
      }
      filtered.forEach(book => {
        const div = document.createElement("div");
        div.className = "modal_book_item";
        div.innerHTML = `
          <img src="${book.image}" alt="${book.title}">
          <div class="modal_book_info">
            <h3>${book.title}</h3>
            <p class="modal_author"><strong>ì €ì:</strong> ${book.author}</p>
            <p><strong>ì¶œíŒì‚¬:</strong> ${book.publisher}</p>
            <p>${book.description}</p>
            <button class="modal_book_select_btn">ì„ íƒ</button>
          </div>
        `;
        results.appendChild(div);
      });
    }
    // ëª¨ë‹¬ ì—´ê¸° ë²„íŠ¼ í´ë¦­
    document.addEventListener("click", function (e) {
      if (e.target.closest(`#${triggerSelector}`)) {
        e.preventDefault();
        openModal();
      }
    });
    // ëª¨ë‹¬ ë‹«ê¸°
    overlay.addEventListener("click", closeModal);
    closeBtn.addEventListener("click", closeModal);
    // ê²€ìƒ‰ ë²„íŠ¼ / ì—”í„° í‚¤ ì´ë²¤íŠ¸
    searchBtn.addEventListener("click", () => renderBooks(input.value.trim()));
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        renderBooks(input.value.trim());
      }
    });
    // ê²€ìƒ‰ ê²°ê³¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ ì‹œ
    results.addEventListener("click", function (e) {
      if (e.target.classList.contains("modal_book_select_btn")) {
        const bookItem = e.target.closest(".modal_book_item");
        const img = bookItem.querySelector("img").getAttribute("src");
        const title = bookItem.querySelector("h3").innerText;
        const author = bookItem.querySelector(".modal_author").innerText;
        const selectedDisplay = document.getElementById("selected-book-display");
        selectedDisplay.innerHTML = `
          <div class="selected_book_img">
            <img src="${img}" alt="">
          </div>
          <div class="selected_book_text">
            <span>${title}</span>
            <p>${author.replace("ì €ì:", "").trim()}</p>
          </div>
          <a href="#" id="book_search_trigger">
            <div class="group_search_button">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
          </a>
        `;
        closeModal(); // ëª¨ë‹¬ ë‹«ê¸°

        // ìƒˆë¡œ ì¶”ê°€ëœ ë‹ë³´ê¸° ì•„ì´ì½˜ì— ë‹¤ì‹œ ì´ë²¤íŠ¸ ì—°ê²°
        document.getElementById("book_search_trigger").addEventListener("click", function (e) {
          e.preventDefault();
          openModal();
        });
      }
    });
  });
</script>

<!-- í•´ì‹œíƒœê·¸ ê¸°ëŠ¥ ì¶”ê°€
    1) inputì—ì„œ Enterë¡œ íƒœê·¸ ì¶”ê°€
    2) + ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ íƒœê·¸ ì¶”ê°€
    3) í•œê¸€ë§Œ ì…ë ¥ ê°€ëŠ¥
    4) ìµœëŒ€ 8ê°œê¹Œì§€ë§Œ ì¶”ê°€ ê°€ëŠ¥
    5) ì¤‘ë³µ íƒœê·¸ ë°©ì§€
    6) íƒœê·¸ ì‚­ì œ ê°€ëŠ¥
    7) í¼ ì œì¶œìš© hidden inputì— ìë™ ì €ì¥
    8) íƒœê·¸ ì„ íƒì‹œ tagsëª©ë¡ì—ë„ hoverìœ ì§€
    9) íƒœê·¸ ì‚­ì œì‹œ hoverìœ ì§€ ì·¨ì†Œ
    10) íƒœê·¸ë„ ìµœëŒ€ 8ê°œê¹Œì§€ë§Œ hoverìœ ì§€, alertë„ì›€
     -->
<script>
  const input = document.querySelector("input[name='group_keyword_input']");
  const addBtn = document.querySelector(".add_tag_btn");
  const outputArea = document.querySelector(".group_keyword_output");
  const hiddenInput = document.querySelector("#group_keywords_hidden");
  const tagLinks = document.querySelectorAll(".tags a"); // ì•„ë˜ í•´ì‹œíƒœê·¸ ë¦¬ìŠ¤íŠ¸
  const addedTags = new Set();
  const MAX_TAGS = 8;
  const HANGUL_REGEX = /^[ê°€-í£]+$/;
  // hidden inputì— ì €ì¥
  function updateHiddenInput() {
    hiddenInput.value = Array.from(addedTags).join(",");
  }
  // ì‹¤ì œ íƒœê·¸ ì¶”ê°€ í•¨ìˆ˜ (ì¤‘ë³µ, ì œí•œ ë“± í¬í•¨)
  function addTag(tagText) {
    if (!tagText || addedTags.has(tagText)) return;
    if (addedTags.size >= MAX_TAGS) {
      alert("ìµœëŒ€ 8ê°œì˜ íƒœê·¸ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
      return;
    }
    addedTags.add(tagText);
    const tag = document.createElement("div");
    tag.className = "added-tag";
    tag.textContent = tagText;
    const delBtn = document.createElement("span");
    delBtn.className = "tag-delete";
    delBtn.innerHTML = "&times;";
    // â¬‡ ì‚­ì œ ë²„íŠ¼ ê¸°ëŠ¥ì€ ì´ ì•ˆì—!
    delBtn.onclick = () => {
      addedTags.delete(tagText);
      tag.remove();
      updateHiddenInput();
      // â¬‡ ì•„ë˜ í•´ì‹œíƒœê·¸ì—ì„œ hover ìœ ì§€ìš© í´ë˜ìŠ¤ë„ ì œê±°
      tagLinks.forEach(link => {
        if (link.textContent.trim() === tagText) {
          link.classList.remove("clicked");
        }
      });
    };
    tag.appendChild(delBtn);
    outputArea.appendChild(tag);
    updateHiddenInput();
  }
  // input ê¸°ë°˜ íƒœê·¸ ì¶”ê°€ (í•œê¸€ ì²´í¬ í¬í•¨)
  function addTagFromInput() {
    const value = input.value.trim();
    const tagText = `#${value}`;
    if (!value) return;
    if (!HANGUL_REGEX.test(value)) {
      alert("í•œê¸€ë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      return;
    }
    addTag(tagText);
    input.value = "";
  }
  // Enter í‚¤ë¡œ ì…ë ¥
  input.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      addTagFromInput();
    }
  });
  // + ë²„íŠ¼ í´ë¦­
  addBtn.addEventListener("click", addTagFromInput);
  // ì•„ë˜ í•´ì‹œíƒœê·¸ í´ë¦­ ì‹œ ì¶”ê°€
  tagLinks.forEach(link => {
    link.addEventListener("click", function(e) {
      e.preventDefault();
      const tagText = this.textContent.trim();
      if (addedTags.size >= MAX_TAGS && !this.classList.contains("clicked")) {
        alert("ìµœëŒ€ 8ê°œì˜ íƒœê·¸ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
      }
      addTag(tagText);
      this.classList.add("clicked");
    });
  });
</script>

<!-- ê·¸ë£¹ ë¹„ë°€ë²ˆí˜¸ ê´€ë ¨ ê¸°ëŠ¥ ì¶”ê°€:
  1) ê³µê°œì—¬ë¶€-ë¹„ê³µê°œ select ì„ íƒ ì‹œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •ë¶€ë¶„ í‘œì‹œë¨.
  2) ìˆ«ì ì™¸ ê¸€ì ì…ë ¥ì‹œ ì°¨ë‹¨(alertí‘œì‹œ)
  3)  ì‹¤ì‹œê°„ ì•ˆë‚´ UX (4~10ìë¦¬ë§Œ ì…ë ¥ ê°€ëŠ¥)
  4) ê¸¸ì´ ì´ˆê³¼ ì‹œ ìë¥´ê¸° (11ìë¦¬ë¶€í„° ë¯¸ì…ë ¥ë¨)
  5) ëˆˆ ì•„ì´ì½˜ on/off ê¸°ëŠ¥
  -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const selectEl = document.getElementById("is_public");
    const pwRow = document.querySelector(".pw_hide");
    const pwInput = document.getElementById("group_pw");
    const toggleIcon = document.getElementById("togglePw");
    const pwMsg = document.getElementById("pw_message");

    // ê³µê°œ/ë¹„ê³µê°œ ì„ íƒ ì‹œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì¹¸ í‘œì‹œ
    selectEl.addEventListener("change", function () {
      if (this.value === "private") {
        pwRow.style.display = "table-row";

        // DOMì´ ë Œë”ë§ë˜ê³  ë‚œ í›„ì— input í™œì„±í™”ë¥¼ ìœ„í•´ ì•½ê°„ì˜ ì—¬ìœ ë¥¼ ì¤Œ
        setTimeout(() => {
          pwInput.focus();
          pwInput.scrollIntoView({ behavior: "smooth", block: "center" });
        }, 50); // 50~100msê°€ ëŒ€ë¶€ë¶„ ì•ˆì •ì 
      } else {
        pwRow.style.display = "none";
        pwInput.value = "";
        pwInput.type = "password";
        toggleIcon.classList.remove("fa-eye");
        toggleIcon.classList.add("fa-eye-slash");
        pwMsg.textContent = "";
        pwMsg.className = "pw-message";
      }
    });

    // ìˆ«ì ì™¸ ì…ë ¥ ì°¨ë‹¨
    let alertShown = false;
    pwInput.addEventListener("keydown", function (e) {
      const allowed =
        (e.key >= "0" && e.key <= "9") ||
        ["Backspace", "Tab", "ArrowLeft", "ArrowRight", "Delete"].includes(e.key);

      if (!allowed) {
        e.preventDefault();

        if (!alertShown) {
          alertShown = true;
          alert("ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
          setTimeout(() => (alertShown = false), 500);
        }
      }
    });

    // ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
    pwInput.addEventListener("input", function () {
      const len = pwInput.value.length;

      if (len === 0) {
        pwMsg.textContent = "";
        pwMsg.className = "pw-message";
      } else if (len < 4) {
        pwMsg.textContent = "ë¹„ë°€ë²ˆí˜¸ëŠ” 4~10ìë¦¬ë¡œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.";
        pwMsg.className = "pw-message invalid";
      } else {
        pwMsg.textContent = "ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.";
        pwMsg.className = "pw-message valid";
      }

      // í˜¹ì‹œë¼ë„ maxlength ì´ˆê³¼ ì…ë ¥ ì‹œ ìë™ ìë¥´ê¸°
      if (len > 10) {
        pwInput.value = pwInput.value.slice(0, 10);
      }
    });

    // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° í† ê¸€
    toggleIcon.addEventListener("click", function () {
      const isHidden = pwInput.type === "password";

      pwInput.type = isHidden ? "text" : "password";
      toggleIcon.classList.toggle("fa-eye-slash", !isHidden);
      toggleIcon.classList.toggle("fa-eye", isHidden);
    });
  });
</script>


<!-- ì·¨ì†Œ/ì™„ë£Œ ë²„íŠ¼ alert -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const cancelBtn = document.getElementById("group_button_1");
    const submitBtn = document.getElementById("group_button_2");
    // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ
    cancelBtn.addEventListener("click", function() {
      const result = confirm("êµí™˜ë…ì„œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
      if (result) {
        // í™•ì¸ ëˆ„ë¥¸ ê²½ìš°
        console.log("ì´ë™");
        window.location.href = "/shareMain/Share_Main/";
      } else {
        // ì·¨ì†Œ ëˆ„ë¥¸ ê²½ìš°
        console.log("ì´ë™ ì·¨ì†Œ");
      }
    });
    // ì™„ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ
    submitBtn.addEventListener("click", function() {
      alert("ê·¸ë£¹ ë§Œë“¤ê¸°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    });
  });
</script>
>>>>>>> Stashed changes
  {% endblock %}
