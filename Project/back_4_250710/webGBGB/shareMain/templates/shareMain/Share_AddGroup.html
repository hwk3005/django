{% extends "base.html" %}
{% load static %}
{% block title %}ÍµêÌôòÎèÖÏÑú | Í∑∏Î£π ÎßåÎì§Í∏∞{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" type="text/css" href="/static/css/Share_AddGroup.css">
  <link rel="stylesheet" type="text/css" href="/static/css/paginator.css">
{% endblock %}

  {% block content %}
    <!-- ÍµêÌôòÎèÖÏÑú Í∑∏Î£πÎßåÎì§Í∏∞  -->
    <div class="feed__content">
      <!-- Ï∞∏Ïó¨Ï§ëÏù¥ Í∑∏Î£π ÌëúÏãú -->
      <div class="feed__add">
          <div class="feed__add_title">
              <i class="fa-solid fa-user-group"></i>
              <span>ÍµêÌôòÎèÖÏÑú Í∑∏Î£π ÎßåÎì§Í∏∞</span>
          </div>
          <!-- form (addgroupFrm)-->
          <form action="{% url 'shareMain:Share_AddGroup' %}" method="post" name="addgroupFrm" id="addgroupFrm">
            {% csrf_token %}
            <!-- üìå Ïà®Í≤®ÏßÑ inputÎì§Î°ú Ï±Ö Ï†ïÎ≥¥ Ï†ÑÎã¨ -->
            <input type="hidden" id="id_book_title" name="book_title">
            <input type="hidden" id="id_book_author" name="book_author">
            <input type="hidden" id="id_book_cover" name="book_cover">
            <input type="hidden" id="id_book_isbn" name="book_isbn">
            <input type="hidden" id="id_tag" name="tag">
              <table class="group_table">
                <tbody>
                  <!-- Í∑∏Î£πÎ™Ö -->
                  <tr>
                    <th>
                      <label>Í∑∏Î£πÎ™Ö</label>
                      <span>*</span>
                    </th>
                    <td><input type="text" name="group_name" class="group_name" placeholder="Í∑∏Î£πÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî." required></td>
                  </tr>
                  <!-- Í∑∏Î£π Ïù∏Ïõê -->
                  <tr>
                    <th>
                      <label>Í∑∏Î£π Ïù∏Ïõê</label>
                      <span>*</span>
                    </th>
                    <td>
                      <div class="member">
                        <select id="max_member" name="max_member" required >
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5</option>
                          <option>6</option>
                          <option>7</option>
                          <option>8</option>
                          <option>9</option>
                          <option selected>10</option>
                        </select>
                        <span class="group_otherText">*ÏµúÏÜå 2Î™Ö ~ ÏµúÎåÄ 10Î™Ö</span>
                      </div>
                    </td>
                  </tr>
                  <!-- Í∑∏Î£π ÏÜåÍ∞ú -->
                  <tr>
                    <th>
                      <label>Í∑∏Î£π ÏÜåÍ∞ú</label>
                      <span>*</span>
                    </th>
                    <td>
                      <textarea name="description" class="group_description" rows="4" placeholder="Í∑∏Î£π ÏÜåÍ∞úÍ∏ÄÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî." required></textarea>
                    </td>
                  </tr>
                  <!-- Ï±Ö ÏÑ†ÌÉù -->
                  <script>
                    const AJAX_SEARCH_URL = "{% url 'shareMain:ajax_search' %}";
                  </script>
                  <tr>
                    <th>
                      <label>Ï±Ö ÏÑ†ÌÉù</label>
                      <span>*</span>
                    </th>
                    <td>
                      <!-- Ïó¨Í∏∞Ïóê ÏÑ†ÌÉùÎêú Ï±Ö ÌëúÏãú -->
                      <div id="selected-book-display">
                        <div id="book_search_trigger" class="selected_book_img">
                          <img src='/static/images/plusBtn.png'/>
                        </div>
                      </div>
                      <!-- ÏÑ†ÌÉùÎêú Ï±Ö ÌëúÏãú ÎÅù -->
                    </td>
                  </tr>
                  <!-- Ï±Ö Í≤ÄÏÉâ - Î™®Îã¨ Ï†ÑÏ≤¥ -->
                  <div class="book_modal" id="book_search_modal">
                    <div class="modal_overlay"></div>
                    <div class="modal_content">
                      <button type="button" class="modal_close">
                        <i class="fa-solid fa-xmark"></i>
                      </button>
                      <h2>Ï±Ö ÏÑ†ÌÉù</h2>
                      <!-- Î™®Îã¨ ÎÇ¥Î∂Ä Í≤ÄÏÉâ input -->
                      <div class="modal_input_wrap">
                        <input type="text" name="book" class="modal_search" id="book_search_input_modal" placeholder="Ï±Ö Ï†úÎ™©/Ï†ÄÏûê Í≤ÄÏÉâ">
                        <button type="button" class="modal_search_btn" id="modal_search_btn">
                          <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                      </div>
                      <!-- Í≤ÄÏÉâ Í≤∞Í≥º -->
                      <div class="modal_results">
                        <!-- ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Î°ú Í≤ÄÏÉâ Í≤∞Í≥º ÏÇΩÏûÖ -->
                      
                        <!-- Î™®Îã¨Ï∞Ω paginator -->
                        <div class="pg-container">
                            <div class="paginator">
                                <!-- Ï≤´ ÌéòÏù¥ÏßÄ, Ïù¥Ï†Ñ ÌéòÏù¥ÏßÄ Î≤ÑÌäº -->
                                <div class="pg-btns">
                                    <button disabled>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M21.9323 22.5362C22.6042 21.8162 22.6042 20.7122 21.8842 20.0162L13.5562 12.0002L23.1562 2.76019L21.4762 1.00819L10.0282 12.0002L21.4763 22.9922L21.9323 22.5122L21.9323 22.5362Z" fill="currentColor"/>
                                        <path d="M12.4786 22.5362C13.1506 21.8162 13.1506 20.7122 12.4306 20.0162L4.10256 12.0002L13.7266 2.76019L12.0466 1.00819L0.598563 12.0002L12.0226 22.9922L12.4786 22.5122L12.4786 22.5362Z" fill="currentColor"/>
                                    </svg>
                                    </button>
                                    <button disabled>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M16.3325 1.47C17.0125 2.18 16.9925 3.3 16.2825 3.98L7.9425 12L17.5625 21.25L15.8825 23L4.4425 12L15.8825 1L16.3325 1.47Z" fill="currentColor"/>
                                    </svg>
                                    </button>
                                </div>

                                <!-- ÌéòÏù¥ÏßÄ Î≤àÌò∏ -->
                                <div class="pg-numbers">
                                    <a class="active">1</a>
                                    <a>2</a>
                                    <a>3</a>
                                    <a>4</a>
                                    <a>5</a>
                                    <a>6</a>
                                </div>

                                <!-- Îã§Ïùå ÌéòÏù¥ÏßÄ, ÎßàÏßÄÎßâ ÌéòÏù¥ÏßÄ Î≤ÑÌäº -->
                                <div class="pg-btns">
                                    <button disabled>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M7.6675 1.47C6.9875 2.18 7.0075 3.3 7.7175 3.98L16.0575 12L6.4375 21.25L8.1175 23L19.5575 12L8.1175 1L7.6675 1.47Z" fill="currentColor"/>
                                        </svg>
                                    </button>
                                    <button disabled>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M2.06775 1.46381C1.39575 2.18381 1.39575 3.28781 2.11575 3.98381L10.4437 11.9998L0.84375 21.2398L2.52375 22.9918L13.9718 11.9998L2.52375 1.00781L2.06775 1.48781V1.46381Z" fill="currentColor"/>
                                            <path d="M11.5214 1.46381C10.8494 2.18381 10.8494 3.28781 11.5694 3.98381L19.8974 11.9998L10.2734 21.2398L11.9534 22.9918L23.4014 11.9998L11.9774 1.00781L11.5214 1.48781V1.46381Z" fill="currentColor"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Î™®Îã¨Ï∞Ω paginator ÎÅù -->
                        
                      </div>
                    </div>
                  </div>
                  <!-- Í¥ÄÎ†® Ìï¥ÏãúÌÉúÍ∑∏ -->
                  <tr>
                    <th><label>Í¥ÄÎ†® Ìï¥ÏãúÌÉúÍ∑∏</label></th>
                    <td>
                        <div class="group_keyword">
                            <div class="group_keyword_input">
                                <input type="text" name="tag" placeholder="ÏßÅÏ†ë ÏûÖÎ†• (ex. Ïãú) ">
                                <div class="add_tag_btn">
                                    <i class="fa-solid fa-plus"></i>
                                </div>
                            </div>
                            <div class="group_keyword_output">
                                <!-- ÏÉùÏÑ±Îêú ÌÉúÍ∑∏Í∞Ä Ïó¨Í∏∞Ïóê Îì§Ïñ¥Í∞ê -->
                            </div>
                            <!-- Ìèº Ï†úÏ∂úÏö© hidden input -->
                            <input type="hidden" name="tag" id="group_keywords_hidden">
                            <div class="tags">
                                <a href=#>#Ïãú</a>
                                <a href=#>#ÏÜåÏÑ§</a>
                                <a href=#>#ÏóêÏÑ∏Ïù¥</a>
                                <a href=#>#Ïù∏Î¨∏</a>
                                <a href=#>#Í≤ΩÏ†ú</a>
                                <a href=#>#ÏûêÍ∏∞Í≥ÑÎ∞ú</a>
                                <a href=#>#Í≥ºÌïô</a>
                                <a href=#>#Ï≤≠ÏÜåÎÖÑ</a>
                                <a href=#>#Ïó≠ÏÇ¨</a>
                                <a href=#>#Ï≤†Ìïô</a>
                                <a href=#>#Ïã¨Î¶¨</a>
                                <a href=#>#ÏÉÅÎã¥</a>
                                <a href=#>#Ìé∏ÌïòÍ≤åÏù¥ÏïºÍ∏∞</a>
                                <a href=#>#Ïö∞Î¶¨ÎÅºÎ¶¨</a>
                                <a href=#>#ÎèÖÏÑúÏ¥àÎ≥¥ÌôòÏòÅ</a>
                                <a href=#>#ÎØ∏ÏÖò</a>
                                <a href=#>#Í∏ÄÏì∞Í∏∞</a>
                                <a href=#>#ÏÑ∏Í≥ÑÎ¨∏Ìïô</a>
                                <a href=#>#Ïä§ÌÜ†Î¶¨ÌÖîÎßÅ</a>
                                <a href=#>#Ïó¨Ìñâ</a>
                                <a href=#>#Ïû°ÏßÄ</a>                                          
                                <a href=#>#Î≤†Ïä§Ìä∏ÏÖÄÎü¨</a>
                                <a href=#>#Í≥†Ï†Ñ</a>
                                <a href=#>#Ïã†Í∞Ñ</a>
                            </div>
                        </div>
                    </td>
                  </tr>
                  <!-- Í≥µÍ∞ú Ïó¨Î∂Ä -->
                  <tr>
                    <th>
                        <label>Í≥µÍ∞ú Ïó¨Î∂Ä</label>
                        <span>*</span>
                    </th>
                    <td>
                        <select id="is_public" name="is_public" required>
                            <option value="0">Í≥µÍ∞ú</option>
                            <option value="1">ÎπÑÍ≥µÍ∞ú</option>
                        </select>
                    </td>
                  </tr>
                  <!-- Í∑∏Î£π ÎπÑÎ∞ÄÎ≤àÌò∏ -->
                  <tr class="pw_hide">
                    <th>
                        <label>Í∑∏Î£π ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                        <span>*</span>
                    </th>
                    <td>
                      <div class="input-with-icon">
                        <input type="password" name="password" class="group_pw" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏"
                          id="group_pw" inputmode="numeric" pattern="\d*" maxlength="10">
                        <i class="fa-solid fa-eye-slash toggle-visibility" id="togglePw"></i>
                      </div>
                      <span id="pw_message" class="pw-message"></span>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- ÌïòÎã® Î≤ÑÌäº -->
              <div class="group_button">
                  <button type="button" id="group_button_1">Ï∑®ÏÜå</button>
                  <button type="submit" id="group_button_2">ÏôÑÎ£å</button>
              </div>
          </form>
      </div>
    
    </div>          

    {% endblock content %}

  {% block extra_js %}
<<<<<<< Updated upstream
    <script src="{% static 'js/Share_AddGroup.js' %}"></script>
=======

<!-- Ï±Ö Í≤ÄÏÉâ (Î™®Îã¨Ï∞Ω) -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const triggerSelector = "book_search_trigger"; // ÎèôÏ†Å ÏöîÏÜåÎ•º ÏúÑÌï¥ id ÏßÅÏ†ë Ìï†Îãπ
    const modal = document.getElementById("book_search_modal");
    const overlay = modal.querySelector(".modal_overlay");
    const closeBtn = modal.querySelector(".modal_close");
    const input = document.getElementById("book_search_input_modal");
    const searchBtn = document.getElementById("modal_search_btn");
    const results = document.getElementById("modal_book_result");
    // ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞
    const dummyBooks = [
      {
        title: "Ïñ¥Î¶∞ ÏôïÏûê",
        author: "ÏïôÌà¨Ïïà Îìú ÏÉùÌÖçÏ•êÌéòÎ¶¨ ÏßÄÏùå, ÍπÄÏÑ§ÏïÑ ÏòÆÍπÄ",
        publisher: "Îã®ÌïúÍ∂åÏùòÏ±Ö",
        description: "Ïñ¥Î¶∞Ïù¥Î•º ÏúÑÌïú Ï≤†ÌïôÎèôÌôî. ÏàúÏàòÌï®ÏùÑ Ï∞æÎäî Ïó¨Ï†ï.",
        image: "https://image.aladin.co.kr/product/22323/62/cover200/8932907503_1.jpg"
      },
      {
        title: "Î™®Î™®Ïùò Ïó¨Î¶Ñ Î∞©Ìïô",
        author: "ÏïºÏóò ÏïÑÏÉ§ ÏßÄÏùå, Î∞ïÏû¨Ïó∞ ÏòÆÍπÄ",
        publisher: "Î∂àÍ¥ëÏ∂úÌåêÏÇ¨",
        description: "Î™®Î™®Îäî ÏßÄÎ£®Ìï®Í≥º Ïã¨Ïã¨Ìï®ÏóêÏÑú Î≤óÏñ¥ÎÇòÍ≥† Ïã∂Ïñ¥Ï°åÎã§.",
        image: "https://image.aladin.co.kr/product/32000/60/cover200/8901265032_1.jpg"
      }
    ];
    // Î™®Îã¨ Ïó¥Í∏∞
    function openModal() {
      modal.style.display = "block";
      input.focus();
    }
    // Î™®Îã¨ Îã´Í∏∞
    function closeModal() {
      modal.style.display = "none";
      results.innerHTML = "";
      input.value = "";
    }
    // Í≤ÄÏÉâ Í≤∞Í≥º Î†åÎçîÎßÅ
    function renderBooks(filter = "") {
      results.innerHTML = "";
      const filtered = dummyBooks.filter(book =>
        book.title.includes(filter)
      );
      if (filtered.length === 0) {
        results.innerHTML = "<p>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</p>";
        return;
      }
      filtered.forEach(book => {
        const div = document.createElement("div");
        div.className = "modal_book_item";
        div.innerHTML = `
          <img src="${book.image}" alt="${book.title}">
          <div class="modal_book_info">
            <h3>${book.title}</h3>
            <p class="modal_author"><strong>Ï†ÄÏûê:</strong> ${book.author}</p>
            <p><strong>Ï∂úÌåêÏÇ¨:</strong> ${book.publisher}</p>
            <p>${book.description}</p>
            <button class="modal_book_select_btn">ÏÑ†ÌÉù</button>
          </div>
        `;
        results.appendChild(div);
      });
    }
    // Î™®Îã¨ Ïó¥Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠
    document.addEventListener("click", function (e) {
      if (e.target.closest(`#${triggerSelector}`)) {
        e.preventDefault();
        openModal();
      }
    });
    // Î™®Îã¨ Îã´Í∏∞
    overlay.addEventListener("click", closeModal);
    closeBtn.addEventListener("click", closeModal);
    // Í≤ÄÏÉâ Î≤ÑÌäº / ÏóîÌÑ∞ ÌÇ§ Ïù¥Î≤§Ìä∏
    searchBtn.addEventListener("click", () => renderBooks(input.value.trim()));
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        renderBooks(input.value.trim());
      }
    });
    // Í≤ÄÏÉâ Í≤∞Í≥º ÏÑ†ÌÉù Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
    results.addEventListener("click", function (e) {
      if (e.target.classList.contains("modal_book_select_btn")) {
        const bookItem = e.target.closest(".modal_book_item");
        const img = bookItem.querySelector("img").getAttribute("src");
        const title = bookItem.querySelector("h3").innerText;
        const author = bookItem.querySelector(".modal_author").innerText;
        const selectedDisplay = document.getElementById("selected-book-display");
        selectedDisplay.innerHTML = `
          <div class="selected_book_img">
            <img src="${img}" alt="">
          </div>
          <div class="selected_book_text">
            <span>${title}</span>
            <p>${author.replace("Ï†ÄÏûê:", "").trim()}</p>
          </div>
          <a href="#" id="book_search_trigger">
            <div class="group_search_button">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
          </a>
        `;
        closeModal(); // Î™®Îã¨ Îã´Í∏∞

        // ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú ÎèãÎ≥¥Í∏∞ ÏïÑÏù¥ÏΩòÏóê Îã§Ïãú Ïù¥Î≤§Ìä∏ Ïó∞Í≤∞
        document.getElementById("book_search_trigger").addEventListener("click", function (e) {
          e.preventDefault();
          openModal();
        });
      }
    });
  });
</script>

<!-- Ìï¥ÏãúÌÉúÍ∑∏ Í∏∞Îä• Ï∂îÍ∞Ä
    1) inputÏóêÏÑú EnterÎ°ú ÌÉúÍ∑∏ Ï∂îÍ∞Ä
    2) + Î≤ÑÌäº ÌÅ¥Î¶≠ÏúºÎ°ú ÌÉúÍ∑∏ Ï∂îÍ∞Ä
    3) ÌïúÍ∏ÄÎßå ÏûÖÎ†• Í∞ÄÎä•
    4) ÏµúÎåÄ 8Í∞úÍπåÏßÄÎßå Ï∂îÍ∞Ä Í∞ÄÎä•
    5) Ï§ëÎ≥µ ÌÉúÍ∑∏ Î∞©ÏßÄ
    6) ÌÉúÍ∑∏ ÏÇ≠Ï†ú Í∞ÄÎä•
    7) Ìèº Ï†úÏ∂úÏö© hidden inputÏóê ÏûêÎèô Ï†ÄÏû•
    8) ÌÉúÍ∑∏ ÏÑ†ÌÉùÏãú tagsÎ™©Î°ùÏóêÎèÑ hoverÏú†ÏßÄ
    9) ÌÉúÍ∑∏ ÏÇ≠Ï†úÏãú hoverÏú†ÏßÄ Ï∑®ÏÜå
    10) ÌÉúÍ∑∏ÎèÑ ÏµúÎåÄ 8Í∞úÍπåÏßÄÎßå hoverÏú†ÏßÄ, alertÎùÑÏõÄ
     -->
<script>
  const input = document.querySelector("input[name='group_keyword_input']");
  const addBtn = document.querySelector(".add_tag_btn");
  const outputArea = document.querySelector(".group_keyword_output");
  const hiddenInput = document.querySelector("#group_keywords_hidden");
  const tagLinks = document.querySelectorAll(".tags a"); // ÏïÑÎûò Ìï¥ÏãúÌÉúÍ∑∏ Î¶¨Ïä§Ìä∏
  const addedTags = new Set();
  const MAX_TAGS = 8;
  const HANGUL_REGEX = /^[Í∞Ä-Ìû£]+$/;
  // hidden inputÏóê Ï†ÄÏû•
  function updateHiddenInput() {
    hiddenInput.value = Array.from(addedTags).join(",");
  }
  // Ïã§Ï†ú ÌÉúÍ∑∏ Ï∂îÍ∞Ä Ìï®Ïàò (Ï§ëÎ≥µ, Ï†úÌïú Îì± Ìè¨Ìï®)
  function addTag(tagText) {
    if (!tagText || addedTags.has(tagText)) return;
    if (addedTags.size >= MAX_TAGS) {
      alert("ÏµúÎåÄ 8Í∞úÏùò ÌÉúÍ∑∏Îßå Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.");
      return;
    }
    addedTags.add(tagText);
    const tag = document.createElement("div");
    tag.className = "added-tag";
    tag.textContent = tagText;
    const delBtn = document.createElement("span");
    delBtn.className = "tag-delete";
    delBtn.innerHTML = "&times;";
    // ‚¨á ÏÇ≠Ï†ú Î≤ÑÌäº Í∏∞Îä•ÏùÄ Ïù¥ ÏïàÏóê!
    delBtn.onclick = () => {
      addedTags.delete(tagText);
      tag.remove();
      updateHiddenInput();
      // ‚¨á ÏïÑÎûò Ìï¥ÏãúÌÉúÍ∑∏ÏóêÏÑú hover Ïú†ÏßÄÏö© ÌÅ¥ÎûòÏä§ÎèÑ Ï†úÍ±∞
      tagLinks.forEach(link => {
        if (link.textContent.trim() === tagText) {
          link.classList.remove("clicked");
        }
      });
    };
    tag.appendChild(delBtn);
    outputArea.appendChild(tag);
    updateHiddenInput();
  }
  // input Í∏∞Î∞ò ÌÉúÍ∑∏ Ï∂îÍ∞Ä (ÌïúÍ∏Ä Ï≤¥ÌÅ¨ Ìè¨Ìï®)
  function addTagFromInput() {
    const value = input.value.trim();
    const tagText = `#${value}`;
    if (!value) return;
    if (!HANGUL_REGEX.test(value)) {
      alert("ÌïúÍ∏ÄÎßå ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§.");
      return;
    }
    addTag(tagText);
    input.value = "";
  }
  // Enter ÌÇ§Î°ú ÏûÖÎ†•
  input.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      addTagFromInput();
    }
  });
  // + Î≤ÑÌäº ÌÅ¥Î¶≠
  addBtn.addEventListener("click", addTagFromInput);
  // ÏïÑÎûò Ìï¥ÏãúÌÉúÍ∑∏ ÌÅ¥Î¶≠ Ïãú Ï∂îÍ∞Ä
  tagLinks.forEach(link => {
    link.addEventListener("click", function(e) {
      e.preventDefault();
      const tagText = this.textContent.trim();
      if (addedTags.size >= MAX_TAGS && !this.classList.contains("clicked")) {
        alert("ÏµúÎåÄ 8Í∞úÏùò ÌÉúÍ∑∏Îßå ÏÑ†ÌÉùÌï† Ïàò ÏûàÏäµÎãàÎã§.");
        return;
      }
      addTag(tagText);
      this.classList.add("clicked");
    });
  });
</script>

<!-- Í∑∏Î£π ÎπÑÎ∞ÄÎ≤àÌò∏ Í¥ÄÎ†® Í∏∞Îä• Ï∂îÍ∞Ä:
  1) Í≥µÍ∞úÏó¨Î∂Ä-ÎπÑÍ≥µÍ∞ú select ÏÑ†ÌÉù Ïãú ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÑ§Ï†ïÎ∂ÄÎ∂Ñ ÌëúÏãúÎê®.
  2) Ïà´Ïûê Ïô∏ Í∏ÄÏûê ÏûÖÎ†•Ïãú Ï∞®Îã®(alertÌëúÏãú)
  3)  Ïã§ÏãúÍ∞Ñ ÏïàÎÇ¥ UX (4~10ÏûêÎ¶¨Îßå ÏûÖÎ†• Í∞ÄÎä•)
  4) Í∏∏Ïù¥ Ï¥àÍ≥º Ïãú ÏûêÎ•¥Í∏∞ (11ÏûêÎ¶¨Î∂ÄÌÑ∞ ÎØ∏ÏûÖÎ†•Îê®)
  5) Îàà ÏïÑÏù¥ÏΩò on/off Í∏∞Îä•
  -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const selectEl = document.getElementById("is_public");
    const pwRow = document.querySelector(".pw_hide");
    const pwInput = document.getElementById("group_pw");
    const toggleIcon = document.getElementById("togglePw");
    const pwMsg = document.getElementById("pw_message");

    // Í≥µÍ∞ú/ÎπÑÍ≥µÍ∞ú ÏÑ†ÌÉù Ïãú ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†•Ïπ∏ ÌëúÏãú
    selectEl.addEventListener("change", function () {
      if (this.value === "private") {
        pwRow.style.display = "table-row";

        // DOMÏù¥ Î†åÎçîÎßÅÎêòÍ≥† ÎÇú ÌõÑÏóê input ÌôúÏÑ±ÌôîÎ•º ÏúÑÌï¥ ÏïΩÍ∞ÑÏùò Ïó¨Ïú†Î•º Ï§å
        setTimeout(() => {
          pwInput.focus();
          pwInput.scrollIntoView({ behavior: "smooth", block: "center" });
        }, 50); // 50~100msÍ∞Ä ÎåÄÎ∂ÄÎ∂Ñ ÏïàÏ†ïÏ†Å
      } else {
        pwRow.style.display = "none";
        pwInput.value = "";
        pwInput.type = "password";
        toggleIcon.classList.remove("fa-eye");
        toggleIcon.classList.add("fa-eye-slash");
        pwMsg.textContent = "";
        pwMsg.className = "pw-message";
      }
    });

    // Ïà´Ïûê Ïô∏ ÏûÖÎ†• Ï∞®Îã®
    let alertShown = false;
    pwInput.addEventListener("keydown", function (e) {
      const allowed =
        (e.key >= "0" && e.key <= "9") ||
        ["Backspace", "Tab", "ArrowLeft", "ArrowRight", "Delete"].includes(e.key);

      if (!allowed) {
        e.preventDefault();

        if (!alertShown) {
          alertShown = true;
          alert("Ïà´ÏûêÎßå ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§.");
          setTimeout(() => (alertShown = false), 500);
        }
      }
    });

    // Ïã§ÏãúÍ∞Ñ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
    pwInput.addEventListener("input", function () {
      const len = pwInput.value.length;

      if (len === 0) {
        pwMsg.textContent = "";
        pwMsg.className = "pw-message";
      } else if (len < 4) {
        pwMsg.textContent = "ÎπÑÎ∞ÄÎ≤àÌò∏Îäî 4~10ÏûêÎ¶¨Î°ú ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§.";
        pwMsg.className = "pw-message invalid";
      } else {
        pwMsg.textContent = "ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÎπÑÎ∞ÄÎ≤àÌò∏ÏûÖÎãàÎã§.";
        pwMsg.className = "pw-message valid";
      }

      // ÌòπÏãúÎùºÎèÑ maxlength Ï¥àÍ≥º ÏûÖÎ†• Ïãú ÏûêÎèô ÏûêÎ•¥Í∏∞
      if (len > 10) {
        pwInput.value = pwInput.value.slice(0, 10);
      }
    });

    // ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥¥Í∏∞/Ïà®Í∏∞Í∏∞ ÌÜ†Í∏Ä
    toggleIcon.addEventListener("click", function () {
      const isHidden = pwInput.type === "password";

      pwInput.type = isHidden ? "text" : "password";
      toggleIcon.classList.toggle("fa-eye-slash", !isHidden);
      toggleIcon.classList.toggle("fa-eye", isHidden);
    });
  });
</script>


<!-- Ï∑®ÏÜå/ÏôÑÎ£å Î≤ÑÌäº alert -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const cancelBtn = document.getElementById("group_button_1");
    const submitBtn = document.getElementById("group_button_2");
    // Ï∑®ÏÜå Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
    cancelBtn.addEventListener("click", function() {
      const result = confirm("ÍµêÌôòÎèÖÏÑú Î©îÏù∏ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
      if (result) {
        // ÌôïÏù∏ ÎàÑÎ•∏ Í≤ΩÏö∞
        console.log("Ïù¥Îèô");
        window.location.href = "/shareMain/Share_Main/";
      } else {
        // Ï∑®ÏÜå ÎàÑÎ•∏ Í≤ΩÏö∞
        console.log("Ïù¥Îèô Ï∑®ÏÜå");
      }
    });
    // ÏôÑÎ£å Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
    submitBtn.addEventListener("click", function() {
      alert("Í∑∏Î£π ÎßåÎì§Í∏∞Í∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.");
    });
  });
</script>
>>>>>>> Stashed changes
  {% endblock %}
